<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Gest√£o Dra Thamiris</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #fdf2f2; font-family: 'Poppins', sans-serif; }
        .thead-rosa { background-color: #d4a3a3; color: white; }
        .btn-rosa { background-color: #d4a3a3; color: white; border: none; border-radius: 10px; }
        .extra { color: #2e7d32; font-weight: bold; background: #e8f5e9; padding: 4px 8px; border-radius: 5px; }
    </style>
</head>
<body>
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h4 style="color: #d4a3a3;">üå∏ Relat√≥rio Penha - Av. Amador Bueno da Veiga, 1230</h4>
        <a href="/" class="btn btn-sm btn-outline-secondary">Voltar</a>
    </div>

    <div class="row mb-4">
        <div class="col-md-4">
            <select class="form-select shadow-sm" onchange="location = '/painel_gestao?senha=8340&mes=' + this.value;">
                <option value="">Filtrar M√™s (Janeiro a Dezembro)</option>
                <option value="1">Janeiro</option><option value="2">Fevereiro</option><option value="3">Mar√ßo</option>
                <option value="4">Abril</option><option value="5">Maio</option><option value="6">Junho</option>
                <option value="7">Julho</option><option value="8">Agosto</option><option value="9">Setembro</option>
                <option value="10">Outubro</option><option value="11">Novembro</option><option value="12">Dezembro</option>
            </select>
        </div>
        <div class="col text-end">
            <button class="btn btn-rosa" data-bs-toggle="modal" data-bs-target="#modalManual">+ Inserir Manual</button>
        </div>
    </div>

    <div class="bg-white p-4 rounded-4 shadow-sm">
        <table class="table table-hover align-middle">
            <thead class="thead-rosa">
                <tr>
                    <th>Colaboradora</th><th>Entrada</th><th>Sa√≠da</th><th>Horas (Base 6h)</th><th>A√ß√µes</th>
                </tr>
            </thead>
            <tbody>
                {% for p in pontos %}
                <tr>
                    <td>{{ p.nome }}</td>
                    <td>{{ p.entrada.strftime('%d/%m/%Y %H:%M') }}</td>
                    <td>{{ p.saida.strftime('%d/%m/%Y %H:%M') if p.saida else '---' }}</td>
                    <td>
                        {% if p.entrada and p.saida %}
                            {% set h = ((p.saida - p.entrada).total_seconds() / 3600) | round(2) %}
                            <span class="{{ 'extra' if h > 6 }}">{{ h }}h {{ '(Extra: +' ~ (h-6)|round(2) ~ 'h)' if h > 6 }}</span>
                        {% endif %}
                    </td>
                    <td><a href="/excluir/{{ p.id }}" class="text-danger" onclick="return confirm('Excluir?')">üóëÔ∏è</a></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div class="modal fade" id="modalManual" tabindex="-1">
    <div class="modal-dialog">
        <form action="/adicionar_manual" method="POST" class="modal-content">
            <div class="modal-header"><h5>Marca√ß√£o Manual</h5></div>
            <div class="modal-body">
                <input type="hidden" name="funcionario_id" value="1">
                <label>Entrada:</label><input type="datetime-local" name="entrada" class="form-control mb-3" required>
                <label>Sa√≠da (Opcional):</label><input type="datetime-local" name="saida" class="form-control">
            </div>
            <div class="modal-footer"><button type="submit" class="btn btn-rosa w-100">Salvar</button></div>
        </form>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>