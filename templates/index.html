<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ponto - Dra Thamiris Araujo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #fff5f8; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color: #5d4a4a; }
        .card-ponto { border-radius: 20px; border: none; box-shadow: 0 10px 30px rgba(212, 165, 178, 0.3); background: white; margin-top: 20px; }
        .btn-luxury { background: #d4a5b2; color: white; border: none; border-radius: 12px; padding: 12px; transition: 0.3s; width: 100%; margin-bottom: 10px; }
        .btn-luxury:hover { background: #b5838d; transform: scale(1.02); }
        .header-estetica { text-align: center; padding: 30px 0; color: #b5838d; }
        #status-msg { border-radius: 15px; display: none; padding: 15px; text-align: center; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header-estetica">
            <h2 style="font-weight: 300; letter-spacing: 2px;">DRA THAMIRIS ARAUJO</h2>
            <p style="font-style: italic; opacity: 0.8;">Est√©tica de Luxo</p>
        </div>

        <div class="row justify-content-center">
            <div class="col-12 col-md-6 col-lg-4">
                <div class="card card-ponto p-4">
                    <label class="mb-2">Selecione seu nome:</label>
                    <select id="nome" class="form-select mb-4" style="border-radius: 10px;">
                        {% for c in colaboradoras %}
                        <option value="{{ c }}">{{ c }}</option>
                        {% endfor %}
                    </select>

                    <button class="btn-luxury" onclick="bater('Entrada')">‚ú® Registrar Entrada</button>
                    <button class="btn-luxury" onclick="bater('Sa√≠da')" style="background: #e9ecef; color: #5d4a4a;">üå∏ Registrar Sa√≠da</button>
                    
                    <div id="status-msg"></div>
                </div>
                <div class="text-center mt-4">
                    <a href="/painel_gestao?senha=8340" style="color: #d4a5b2; text-decoration: none; font-size: 0.8rem;">√Årea Administrativa</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        let lat = "", lon = "";
        navigator.geolocation.getCurrentPosition(p => { lat = p.coords.latitude; lon = p.coords.longitude; });

        function bater(tipo) {
            const nome = document.getElementById('nome').value;
            const btn = event.target;
            btn.disabled = true;

            fetch('/bater_ponto', {
                method: 'POST',
                headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                body: `nome=${nome}&tipo=${tipo}&lat=${lat}&lon=${lon}`
            })
            .then(res => res.json())
            .then(data => {
                const box = document.getElementById('status-msg');
                box.style.display = 'block';
                box.style.backgroundColor = data.fora ? '#fff3cd' : '#d1e7dd';
                box.innerHTML = `<strong>${data.msg_destaque}</strong><br><small>${data.msg_sub}</small>`;
                setTimeout(() => { location.reload(); }, 3000);
            });
        }
    </script>
</body>
</html>