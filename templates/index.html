<script>
function baterPonto(tipo) {
    const form = document.createElement('form');
    form.method = 'POST';
    form.action = '/bater_ponto';

    const inputTipo = document.createElement('input');
    inputTipo.name = 'tipo'; inputTipo.value = tipo;
    form.appendChild(inputTipo);

    const latInp = document.createElement('input'); latInp.name = 'lat';
    const lonInp = document.createElement('input'); lonInp.name = 'lon';

    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition((pos) => {
            latInp.value = pos.coords.latitude;
            lonInp.value = pos.coords.longitude;
            enviar();
        }, () => { enviar(); }); // Se negar GPS, envia vazio
    } else { enviar(); }

    function enviar() {
        form.appendChild(latInp); form.appendChild(lonInp);
        document.body.appendChild(form);
        form.submit();
    }
}
</script>

<button onclick="baterPonto('Entrada')" class="btn btn-entrada">Bater Entrada</button>
<button onclick="baterPonto('Saída')" class="btn btn-saida">Bater Saída</button>